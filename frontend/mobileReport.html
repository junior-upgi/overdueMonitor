<!doctype html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="utf-8" http-equiv="pragma" content="no-cache" />
    <title>逾期款日報</title>
    <link rel="stylesheet" type="text/css" href="global.css" />
</head>

<body>
    <h1>逾期款日報</h1>
    <h3 id="currentDate"></h3>
    <div>
        <div>
            【逾期款項產生】
            <ul id="newOverdueList">
            </ul>
        </div>
        <div>
            【當週逾期款項提醒】
            <ul id="weeklyOverdueSummary">
            </ul>
        </div>
    </div>
</body>

</html>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" charset="utf-8"></script>
<script>
    $(document).ready(function() {
        var currentDate = new Date();
        $("#currentDate").text(currentDate.getFullYear() + '/' + (currentDate.getMonth() + 1) + '/' + currentDate.getDate());
        $.getJSON("dataSource/overdueAlert.php", function(result) {
            $.each(result, function(recordIndex, record) {
                $("#newOverdueList").append("<li class=\"overdueItem newOverdue\" data-client=\"" + record.CUS_NO + "\">" + record.content + "</li>");
            });
            $(".newOverdue").css("color", "red");
            $.getJSON("dataSource/weeklyAlert.php", function(result) {
                $.each(result, function(recordIndex, record) {
                    if (record.G_PERIOD_REMAIN == 0) {
                        $("#weeklyOverdueSummary").append("<li class=\"overdueItem weekOldOverdue\" data-client=\"" + record.CUS_NO + "\">" + record.content + "</li>");
                    } else {
                        $("#weeklyOverdueSummary").append("<li class=\"overdueItem\" data-client=\"" + record.CUS_NO + "\">" + record.content + "</li>");
                    }
                });
                $(".weekOldOverdue").css("color", "red");
                $(".overdueItem").click(function() {
                    console.log($(this).data("client"));
                });
            });
        });
    });
</script>